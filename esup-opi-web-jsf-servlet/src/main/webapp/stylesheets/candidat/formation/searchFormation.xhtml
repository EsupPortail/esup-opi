<ui:composition xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    template="template.xhtml">
    <ui:define name="content">
    	<div id="maPage" class="div_body">
    		<h1><h:outputText value="#{msgs['FORMATION.TITLE.SEARCH']}" /></h1>
    		<div class="messageForUser">
    			<p:message id="messages" showDetail="true" autoUpdate="true" />
    		</div>
    		<ui:include src="_blockConfirmContinu.xhtml" />
    		<ui:include src="_blockFormationSelect.xhtml" />    		
    		
    		<div id="div_subSection" class="div_subSection">
    			<h:form id="searchFormationForm" styleClass="opiR1_form">
    				<div id="div_subSection" class="div_subSection">
    					<div id="blockFormTypeDip" class="blockForm">
    						<div style="width:100%;">
    							<h:outputText value="#{msgs['FORMATION.ACCESS.TYP_DIPLOME']}"
    								styleClass="section-smallTitle" />
    						</div>
    						<div class="blockTable">
    							<div class="blockCenterWidthMax">
    								<p:commandButton image="/media/images/LMD-Licence.png"
    									rendered="#{formationController.licence != null}"
    									immediate="true">
    									<f:setPropertyActionListener value="#{formationController.licence}" target="#{formationController.searchFormationPojo.groupTypSelected}" />
    								</p:commandButton>
    								<p:commandButton image="/media/images/LMD-Master.png"
    									rendered="#{formationController.master != null}"
    									immediate="true">
    									<f:setPropertyActionListener value="#{formationController.master}" target="#{formationController.searchFormationPojo.groupTypSelected}" />
    								</p:commandButton>
    								<p:commandButton image="/media/images/LMD-Doctorat.png"
    										rendered="#{formationController.doctorat != null}"
    										immediate="true">
    									<f:setPropertyActionListener value="#{formationController.doctorat}" target="#{formationController.searchFormationPojo.groupTypSelected}" />
    								</p:commandButton>
    							</div>
    							<div class="blockCenterWidthMax">
    								<ul class="listeTypeDiplome">
    									<p:dataList var="grpTypDip" value="#{formationController.groupTypeDip}">
    										<li>
    											<p:commandButton value="#{grpTypDip.libGrpTpd}"
    												immediate="true"
    												styleClass="form-button-link-small">
    												<f:setPropertyActionListener value="#{grpTypDip}" target="#{formationController.searchFormationPojo.groupTypSelected}" />
    											</p:commandButton>
    										</li>
    									</p:dataList>
    								</ul>
    							</div>
    						</div>
    
    					</div>
    					<br />
    					<br />
    					<br />
                        <ui:segment 
                            rendered="#{formationController.searchFormationPojo.groupTypSelected != null}">
        					<div id="blockFormMotClef" class="blockForm">
        						<div style="width:100%;">
        							<h:outputText value="#{msgs['FORMATION.ACCESS.KEY_WORD']}" styleClass="section-smallTitle" />
        						</div>
        
        						<h:panelGrid styleClass="tableWidthMax" columns="2"
        							columnClasses="col1UnDemi,col2UnDemi">
        							<h:panelGroup>
        								<h:outputLabel value="#{msgs['FORMATION.SELECT.KEY_WORD']}" for="motClef" />
        							</h:panelGroup>
        							<h:panelGroup>
        								<p:selectOneMenu
        									valueChangeListener="#{formationController.selectKeyWord}"
        									value="#{formationController.searchFormationPojo.codKeyWordSelected}"
        									onchange="javascript:{simulateLinkClick('searchFormationForm:submitKeyWord');}">
        									<f:selectItems value="#{formationController.keyWordItems}" />
        								</p:selectOneMenu>
        								<p:commandButton id="submitKeyWord" action="#{formationController.selectKeyWord}" />
        							</h:panelGroup>
        						</h:panelGrid>
        					</div>
                        </ui:segment>
    					<br />
    					<br />
    					<br />
                        <ui:segment
                            rendered="#{formationController.searchFormationPojo.versionDiplomes != null 
                            && formationController.searchFormationPojo.versionEtapes == null}">
        					<div id="blockFormFormation" class="blockForm">
        						<ui:include src="_displayFormation.xhtml" />
        						<br />
        						<br />
        						<br />
        					</div>
                        </ui:segment>
    				</div>
    			</h:form>
    			<ui:include src="_selectVrsEtape.xhtml" />
    		</div>
    	</div>
    	
    	<script type="text/javascript">
        	highlightChildrenLiTags('navigationHeader:navigationLogin');
        	highlightChildrenLiTags('navigationFooter:navigationLogin');
        	highlightInputAndSelect('searchFormationForm');
        	hideButton('searchFormationForm:submitKeyWord');
        	hideButton('searchFormationForm:submitTypeDiplome');
        </script>
    </ui:define>
</ui:composition>
