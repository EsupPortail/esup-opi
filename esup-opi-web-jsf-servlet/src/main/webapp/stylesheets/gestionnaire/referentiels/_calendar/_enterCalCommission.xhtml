<ui:fragment xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
    <br />
    <br />
    <br />
    <div id="blockFormDate" class="blockForm">
    	<div style="width:100%;">
    		<h:panelGrid columns="2" columnClasses="col1UnDemi,col2UnDemi"
    			styleClass="tableJustWidthMax">
    			<h:outputText value="#{msgs['CALENDAR.CMI.TITLE']}"
    				styleClass="section-smallTitle" />
    			<h:panelGroup>
    				<p:commandButton value="#{msgs['_.BUTTON.VALIDATE']}"
    					action="#{calendarController.add}"
    					rendered="#{managedAccess.addAuthorized 
    						&& calendarController.actionEnum.whatAction == calendarController.actionEnum.addAction}" />
    				<p:commandButton value="#{msgs['_.BUTTON.VALIDATE']}"
    					action="#{calendarController.update}"
    					rendered="#{managedAccess.updateAuthorized 
    						&& calendarController.actionEnum.whatAction == calendarController.actionEnum.updateAction}" />
    				<p:commandButton value="#{msgs['_.BUTTON.CANCEL']}" immediate="true"
    					action="#{calendarController.goSeeAllCal}" />
    			</h:panelGroup>
    		</h:panelGrid>
    	</div>
    	<h:panelGrid styleClass="tableWidthMax" columns="4"
    		columnClasses="colUnQuart,colUnQuart,colUnQuart,colUnQuart">
    		<h:panelGroup>
    			<h:outputLabel value="#{msgs['FIELD_LABEL.CODE']}" for="code" />
    			<h:outputText value="*" styleClass="etoileForChpObli" />
    		</h:panelGroup>
    		<h:inputText id="code" size="12" maxlength="11"
    			value="#{calendarController.beanCalendar.calendar.code}" />
    		<h:panelGroup>
    			<h:outputLabel value="#{msgs['FIELD_LABEL.LIBELLE']}" for="libelle" />
    			<h:outputText value="*" styleClass="etoileForChpObli" />
    		</h:panelGroup>
    		<h:inputText id="libelle" size="81" maxlength="80"
    			value="#{calendarController.beanCalendar.calendar.libelle}" />
    		
    		<h:panelGroup>
    			<h:outputLabel value="#{msgs['CALENDAR.CMI.END_DAT_CONF_RES']}"
    				for="dateFin" />
    		</h:panelGroup>
    		<h:inputText id="dateFin" size="10" maxlength="8"
    			value="#{calendarController.beanCalendar.calendar.endDatConfRes}">
    			<f:convertDateTime pattern="ddMMyyyy" timeZone="#{sessionController.timezone}"/>
    			<f:validateLength minimum="8"/>
    		</h:inputText>
    		
    		<h:panelGroup>
    			<h:outputLabel value="#{msgs['COMMISSION.DAT_END_BACK_DOS_SHORT']}"
    				for="dateBack" />
    			<h:outputText value="*" styleClass="etoileForChpObli" />
    		</h:panelGroup>
    		<h:inputText id="dateBack" size="10" maxlength="8"
    			value="#{calendarController.beanCalendar.calendar.datEndBackDossier}">
    			<f:convertDateTime pattern="ddMMyyyy" timeZone="#{sessionController.timezone}"/>
    			<f:validateLength minimum="8"/>
    		</h:inputText>
    		<h:panelGroup/>
    		<h:panelGroup/>
    		<h:panelGroup>
    			<h:outputLabel value="#{msgs['CALENDAR.CMI.COMM_DATE_END_BACK']}"
    				for="commDateBack" />
    		</h:panelGroup>
    		<h:inputText id="commDateBack" size="80" maxlength="100"
    			value="#{calendarController.beanCalendar.calendar.commDatEndBack}"/>
    		<h:outputLabel value="#{msgs['COMMISSIONS']}" for="commission" />
    		<h:outputText id="commission"
    			value="#{calendarController.beanCalendar.calendar.commission.libelle}" />
    		<h:outputLabel value="#{msgs['FIELD_LABEL.IN_USE']}" for="temEnSveCalIns"/>
    		<p:selectBooleanCheckbox id="temEnSveCalIns" 
    			value="#{calendarController.beanCalendar.calendar.temoinEnService}" />
    	</h:panelGrid>
    </div>
    <br />
    <br />
    <br />
    <div id="blockFormDateReunion" class="blockForm">
    	<div style="width:100%;">
    		<h:panelGrid columns="2" columnClasses="col1UnDemi,col2UnDemi"
    			styleClass="tableJustWidthMax">
    			<h:outputText value="#{msgs['REUNION_CMI.SEANCES']}" styleClass="section-smallTitle" />
    			<h:panelGroup>
    				<p:commandButton value="#{msgs['_.BUTTON.ADD']}" 
    					action="#{calendarController.addReunion}"/>
    			</h:panelGroup>
    		</h:panelGrid>
    	</div>
    	<p:dataTable var="reunion"
    		styleClass="displayInfo" alternateColors="false"
    		value="#{calendarController.reunions}">
    		<p:column>
    			<f:facet name="header">
    				<h:outputText value="#{msgs['REUNION_CMI.DATE']}" />
    			</f:facet>
    			<h:inputText id="dateReunion" size="10" maxlength="8"
    					value="#{reunion.date}">
    				<f:convertDateTime pattern="ddMMyyyy" timeZone="#{sessionController.timezone}"/>
    				<f:validateLength minimum="8"/>
    			</h:inputText>
    		</p:column>
    		<p:column>
    			<f:facet name="header">
    				<h:outputText value="#{msgs['REUNION_CMI.HOUR']}" />
    			</f:facet>
    			<h:inputText id="hhReunion" size="6" maxlength="5"
    					value="#{reunion.heure}">
    				<f:convertDateTime pattern="HH:mm" timeZone="#{sessionController.timezone}"/>
    			</h:inputText>
    		</p:column>
    		<p:column>
    			<f:facet name="header">
    				<h:outputText value="#{msgs['REUNION_CMI.PLACE']}" />
    			</f:facet>
    			<h:inputText id="libelle" size="61" maxlength="255"
    					value="#{reunion.lieu}" />
    		</p:column>
    		<p:column>
    			<p:commandButton image="/media/images/cancel.png"
    				action="#{calendarController.removeReunion}"
    				styleClass="form-button-image" title="#{msgs['_.BUTTON.DELETE']}" >
    				<f:setPropertyActionListener value="#{reunion}" target="#{calendarController.reunionToRemove}" />
    			</p:commandButton>
    		</p:column>
    	
    	</p:dataTable>
    </div>
</ui:fragment>