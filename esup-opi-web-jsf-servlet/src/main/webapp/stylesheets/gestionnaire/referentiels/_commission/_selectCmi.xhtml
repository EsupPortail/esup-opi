<ui:fragment xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
    <ui:fragment rendered="#{commissionController.actionEnum.whatAction == commissionController.actionEnum.seeSelectCmi}">
        <div id="blockSelectcmi" class="blockForm">
        	<h:panelGrid styleClass="tableWidthMax" columns="2"
        		columnClasses="col1UnDemi,col2UnDemi">
        		<h:panelGroup>
        			<h:outputLabel value="#{msgs['COMMISSION.CHOICE']}" for="selectCmi" />
        		</h:panelGroup>
        		<h:panelGroup>
        			<p:selectOneMenu converter="javax.faces.Integer"
        				valueChangeListener="#{commissionController.selectCommission}"
        				value="#{commissionController.commission.id}"
        				onclick="javascript:{clickAnnuler = true;}"
        				onchange="javascript:{simulateLinkClick('submitCmi');}">
        				<f:selectItem itemLabel="#{msgs['FIELD_LABEL.SELECT']}" itemValue="" />
        				<f:selectItems var="cmi"
        					value="#{commissionController.commissionsItemsByRight}"
        					itemLabel="#{cmi.libelle}" itemValue="#{cmi.id}" />
        			</p:selectOneMenu>
        			<p:commandButton id="submitCmi" forceId="true" styleClass="form-button"
        					action="#{commissionController.selectCommission}"
        					onclick="javascript:{clickAnnuler = true;}">
        				<f:setPropertyActionListener value="#{commissionController.actionEnum.emptyAction}" target="#{commissionController.actionEnum.whatAction}" />
        			</p:commandButton>
        		</h:panelGroup>
        	</h:panelGrid>
        </div>
    </ui:fragment>
    <br />
    <br />
    
    <div id="blockCmiSelected" class="blockForm">
    	<div style="width:100%;">
    		<h:panelGrid columns="2" columnClasses="col1UnDemi,col2UnDemi"
    			styleClass="tableJustWidthMax">
    			<h:outputText value="#{msgs['COMMISSIONS']}"
    				styleClass="section-smallTitle" />
    			<h:panelGroup>
    				<p:commandButton value="#{msgs['_.BUTTON.ADD']}" ajax="false"
    					onclick="javascript:{clickAnnuler = true;}">
    					<f:setPropertyActionListener value="#{commissionController.actionEnum.seeSelectCmi}" target="#{commissionController.actionEnum.whatAction}" />
    				</p:commandButton>
    			</h:panelGroup>
    		</h:panelGrid>
    	</div>
    	<p:dataTable var="commission"
    		value="#{commissionController.selectedCommissions}"
    		styleClass="displayInfo">
    		<p:column>
    			<f:facet name="header">
    				<h:outputText value="#{msgs['FIELD_LABEL.CODE']}" />
    			</f:facet>
    			<h:outputText value="#{commission.code}" />
    		</p:column>
    		<p:column>
    			<f:facet name="header">
    				<h:outputText value="#{msgs['FIELD_LABEL.LIBELLE']}" />
    			</f:facet>
    			<h:outputText value="#{commission.libelle}" />
    		</p:column>
    		<p:column>
    			<p:commandButton icon="ui-icon-minus"
                    ajax="false"
    				styleClass="form-button-image"
    				action="#{commissionController.removeCmi}"
    				title="#{msgs['_.BUTTON.DELETE']}">
    				<f:setPropertyActionListener value="#{commission}" target="#{commissionController.commission}" />
    			</p:commandButton>
    		</p:column>
    	</p:dataTable>
    </div>
</ui:fragment>