<ui:composition xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/stylesheets/templateGestionnaire.xhtml">
    <ui:define name="content">
        <div id="maPage" class="div_body">
            <h1>
                <h:outputText value="#{managedAccess.currentTraitement.libelle}"/>
            </h1>

            <h:form id="choiceColFormComp" styleClass="opiR1_form"
                    rendered="#{exportFormOrbeonController.actionEnum.whatAction
    					== exportFormOrbeonController.actionEnum.choiceColExport}">
                <p:commandButton value="#{msgs['_.BUTTON.VALIDATE']}" ajax="false">
                    <f:setPropertyActionListener value="#{exportFormOrbeonController.actionEnum.emptyAction}"
                                                 target="#{exportFormOrbeonController.actionEnum.whatAction}"/>
                </p:commandButton>

                <h:outputText value="#{msgs['COMMISSION.EXPORT_LISTE_PREPA_CHAMPS']}"/>

                <div id="listcolumn">
                    <p:dataList var="key" id="titrecom"
                                value="#{exportFormOrbeonController.champsDispos}">
                        <jdt:multipleRowsSelector
                                selectionList="#{exportFormOrbeonController.champsChoisis}"/>
                        <h:outputText value="#{exportFormOrbeonController.libBase[key]}" style="padding-right:10px;"/>
                    </p:dataList>
                </div>
            </h:form>

            <h:form id="printListsFormComp" styleClass="opiR1_form"
                    rendered="#{exportFormOrbeonController.actionEnum.whatAction
    					!= exportFormOrbeonController.actionEnum.choiceColExport}">
                <div id="blockFormSearch" class="blockForm">
                    <div style="text-align:right;">
                        <p:commandButton value="#{msgs['_.BUTTON.CHOICE_COL']}" immediate="true" ajax="false">
                            <f:setPropertyActionListener
                                    value="#{exportFormOrbeonController.actionEnum.choiceColExport}"
                                    target="#{exportFormOrbeonController.actionEnum.whatAction}"/>
                        </p:commandButton>
                    </div>

                    <h:panelGrid styleClass="tableWidthMax" columns="3"
                                 columnClasses="colUnQuart,colUnQuart,colUnQuart,colUnQuart">
                        <h:outputLabel value="#{msgs['COMMISSIONS']}" for="lacommision"/>

                        <h:panelGroup>
                            <p:selectOneMenu id="lesCommissions" converter="javax.faces.Integer"
                                             value="#{printOpinionController.idCommissionSelected}"
                                             onchange="javascript:{simulateLinkClick('printListsFormComp:selectCommission');}">
                                <f:selectItem itemLabel="" itemValue=""/>
                                <f:selectItems var="commission"
                                               value="#{commissionController.commissionsItemsByRightAndIsFormComp}"
                                               itemLabel="#{commission.libelle}" itemValue="#{commission.id}"/>
                            </p:selectOneMenu>
                            <p:commandButton id="selectCommission" ajax="false"/>
                        </h:panelGroup>

                        <br/>

                        <h:outputLabel value="#{msgs['FIELD_LABEL.REGIME_INSCRIPTION']}" for="fc"/>

                        <p:selectManyCheckbox value="#{commissionController.listeRI}"
                                              converter="#{regimeInscriptionConverter}"
                                              disabled="#{!paginatorIndividu.indRechPojo.canModifyRISearch}"
                                              layout="lineDirection">
                            <f:selectItems var="ri"
                                           itemLabel="#{ri.shortLabel}" itemValue="#{ri}"
                                           value="#{nomenclatureController.allRegimeInscription}"/>
                        </p:selectManyCheckbox>

                        <h:panelGroup>
                            <p:commandButton value="#{msgs['_.BUTTON.EXPORT_FORM']}"
                                             rendered="#{printOpinionController.idCommissionSelected != null}"
                                             action="#{printOpinionController.makeCsvFormulaire}" ajax="false"/>
                        </h:panelGroup>
                    </h:panelGrid>
                </div>
            </h:form>
            <br/>
            <br/>
            <br/>
        </div>
    </ui:define>
</ui:composition>
