<ui:fragment xmlns:f="http://java.sun.com/jsf/core"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:p="http://primefaces.org/ui">
    <div style="width:100%;">
        <h:panelGrid columns="2" columnClasses="col1UnDemi,col2UnDemi"
                     styleClass="tableJustWidthMax">
            <h:outputText value="#{msgs['FIELD_LABEL.ETAPES']}"
                          styleClass="section-smallTitle"/>
            <h:panelGroup>
                <p:commandButton value="#{msgs['_.BUTTON.SEARCH']}"
                                 rendered="#{nomenclatureController.actionEnum.whatAction != nomenclatureController.actionEnum.readAction
    				|| nomenclatureController.wayfEnum.whereAreYouFrom == nomenclatureController.wayfEnum.affectPJValue}"
                                 action="#{nomenclatureController.goSearchEtpForPJ}"/>
            </h:panelGroup>
        </h:panelGrid>
    </div>
    <p:dataTable id="trtpj" var="pieceJustiVetPojo"
                 value="#{nomenclatureController.allEtapesItems}"
                 styleClass="paginatorData"
                 rendered="#{not empty nomenclatureController.allEtapesItems}">
        <p:column style="width:15%;">
            <f:facet name="header">
                <h:outputText value="#{msgs['FIELD_LABEL.CODE']} #{msgs['FIELD_LABEL.VRS_VET']}"/>
            </f:facet>
            <h:outputText value="#{pieceJustiVetPojo.pieceJustiVet.versionEtpOpi.codVrsVet}"/>
        </p:column>
        <p:column style="width:8%;">
            <f:facet name="header">
                <h:outputText value="#{msgs['FIELD_LABEL.CODE']} #{msgs['FIELD_LABEL.ETP']}"/>
            </f:facet>
            <h:outputText value="#{pieceJustiVetPojo.pieceJustiVet.versionEtpOpi.codEtp}"/>
        </p:column>
        <p:column wstyle="width:74%;">
            <f:facet name="header">
                <h:outputText value="#{msgs['FIELD_LABEL.ETP']}"/>
            </f:facet>
            <h:outputText value="#{pieceJustiVetPojo.versionEtape.libWebVet}"/>
        </p:column>
        <p:column style="width:3%;">
            <p:commandButton icon="ui-icon-minus" immediate="true"
                             rendered="#{(nomenclatureController.actionEnum.whatAction != nomenclatureController.actionEnum.readAction
    				|| nomenclatureController.wayfEnum.whereAreYouFrom == nomenclatureController.wayfEnum.affectPJValue)
    				and pieceJustiVetPojo.allRight}"
                             action="#{nomenclatureController.removeTrtEtape}"
                             title="#{msgs['_.BUTTON.DELETE']}"
                             ajax="false">
                <f:setPropertyActionListener value="#{pieceJustiVetPojo}"
                                             target="#{nomenclatureController.etapeTraitee}"/>
            </p:commandButton>
        </p:column>
    </p:dataTable>
</ui:fragment>
