<ui:composition xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    template="template.xhtml">
    <ui:define name="content">
    	<div id="maPage" class="div_body">
    		<h1><h:outputText value="#{msgs['GESTIONNAIRE.TITLE.LIST']}" /></h1>
            <ui:fragment rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.deleteAction}">
        		<div id="div_subSectionDelete" class="div_subSection">
        			<ui:include src="_manager/_deleteManager.xhtml" />
        		</div>
            </ui:fragment>
    		<div class="messageForUser">
    			<p:message id="messages" showDetail="true" autoUpdate="true" />
    		</div>
    		
    		
    		<div id="blockFormSearch" class="blockForm">
    			<h:form id="lookForIndForm" styleClass="opiR1_form">
    				<h:panelGrid columns="2" columnClasses="col1UnDemi,col2UnDemi"
    					styleClass="tableJustWidthMax">
    					<h:outputText value="#{msgs['FIELD_LABEL.LOOK_FOR.GEST']}"
    						styleClass="section-smallTitle" />
    					<h:panelGroup>
    						<p:commandButton value="#{msgs['_.BUTTON.SEARCH']}"
    							action="#{gestionnaireController.filterPaginator}" />
    					</h:panelGroup>
    				</h:panelGrid>
    				<h:panelGrid styleClass="tableWidthMax" columns="4"
    					columnClasses="colUnQuart,colUnQuart,colUnQuart,colUnQuart">
    					<h:panelGroup>
    						<h:outputLabel value="#{msgs['FIELD_LABEL.NAME']}"
    							for="nom" />
    					</h:panelGroup>
    					<h:inputText id="nom"
    						value="#{gestionnaireController.paginator.gestRechPojo.nom}" />
    
    					<h:panelGroup>
    						<h:outputLabel value="#{msgs['FIELD_LABEL.FIRST_NAME']}"
    							for="prenom" />
    					</h:panelGroup>
    					<h:inputText id="prenom"
    						value="#{gestionnaireController.paginator.gestRechPojo.prenom}" />
    				</h:panelGrid>
    			</h:form>
    		</div>
    
    		<br />
    		
    		
    		
    		
    		<h:form id="seeManagersForm">
    			<br />
    			<br />
    			<br />
    			<div id="blockFormListDom" class="blockForm">
    				<div class="blockButton">
    					<h:panelGroup>
    						<p:commandButton value="#{msgs['_.BUTTON.ADD']}"
    							styleClass="form-button" immediate="true"
    							rendered="#{managedAccess.addAuthorized}"
    							action="#{gestionnaireController.goEnterManager}">
    							<f:setPropertyActionListener value="#{gestionnaireController.actionEnum.addAction}" target="#{gestionnaireController.actionEnum.whatAction}" />
    						</p:commandButton>
    						<p:commandButton value="#{msgs['_.BUTTON.BACK']}"
    							immediate="true"
    							action="#{welcomeController.goWelcomeManager}">
    							<f:setPropertyActionListener value="#{gestionnaireController.actionEnum.emptyAction}" target="#{gestionnaireController.actionEnum.whatAction}" />
    						</p:commandButton>
    					</h:panelGroup>
    				</div>
    				<p:dataTable var="manager" id="managerData"
    					value="#{gestionnaireController.paginator.visibleItems}"
    					styleClass="paginatorData" alternateColors="true"
    					renderedIfEmpty="false">
    					<f:facet name="header">
    						<h:panelGroup >
    							<e:paginator id="managerPaginator"
    								paginator="#{gestionnaireController.paginator}"
    								itemsName="#{msgs['GESTIONNAIRES']}"
    								onchange="javascript:{simulateLinkClick('seeManagersForm:managerData:submitPageSize');}" />
    							<p:commandButton id="submitPageSize"
    								action="#{gestionnaireController.paginator.forceReload}" />
    						</h:panelGroup>
    					</f:facet>
    					<p:column>
    						<f:facet name="header">
    							<h:outputText value="#{msgs['GESTIONNAIRE.LOGIN']}" />
    						</f:facet>
    						<h:outputText value="#{manager.login}" />
    					</p:column>
    					<p:column>
    						<f:facet name="header">
    							<h:outputText value="#{msgs['PROFIL']}" />
    						</f:facet>
    						<h:outputText value="#{manager.profile.libelle}" />
    					</p:column>
    					<p:column>
    						<f:facet name="header">
    							<h:outputText value="#{msgs['FIELD_LABEL.NAME']}" />
    						</f:facet>
    						<h:outputText value="#{manager.displayName}" />
    					</p:column>
    					<p:column>
    						<f:facet name="header">
    							<h:outputText value="#{msgs['FIELD_LABEL.MAIL']}" />
    						</f:facet>
    						<h:outputText value="#{manager.adressMail}" />
    					</p:column>
    					<p:column>
    						<f:facet name="header">
    							<h:outputText value="#{msgs['FIELD_LABEL.IN_USE']}" />
    						</f:facet>
    						<p:graphicImage url="/media/images/check2.gif"
    							rendered="#{manager.temoinEnService}" />
    						<p:graphicImage url="/media/images/check0.gif"
    							rendered="#{!manager.temoinEnService}" />
    					</p:column>
    					<p:column>
    						<p:commandButton image="/media/images/magnifier.png"
    							styleClass="form-button-image" immediate="true"
    							title="#{msgs['_.BUTTON.DISPLAY']}" 
    							action="#{gestionnaireController.goSeeOneManager}">
    							<f:setPropertyActionListener value="#{manager}" target="#{gestionnaireController.manager}" />
    						</p:commandButton>
    					</p:column>
    					<p:column>
    						<p:commandButton image="/media/images/update.png"
    							immediate="true" styleClass="form-button-image"
    							title="#{msgs['BUTTON.UPDATE']}"
    							rendered="#{managedAccess.updateAuthorized}"
    							action="#{gestionnaireController.goEnterManager}">
    							<f:setPropertyActionListener value="#{gestionnaireController.actionEnum.updateAction}" target="#{gestionnaireController.actionEnum.whatAction}" />
    							<f:setPropertyActionListener value="#{manager}" target="#{gestionnaireController.manager}" />
    						</p:commandButton>
    					</p:column>
    					<p:column>
    						<p:commandButton image="/media/images/cancel.png"
    							styleClass="form-button-image" immediate="true"
    							rendered="#{managedAccess.deleteAuthorized}"
    							title="#{msgs['_.BUTTON.DELETE']}">
    								<f:setPropertyActionListener value="#{gestionnaireController.actionEnum.deleteAction}" target="#{gestionnaireController.actionEnum.whatAction}" />
    								<f:setPropertyActionListener value="#{manager}" target="#{gestionnaireController.manager}" />
    						</p:commandButton>
    					</p:column>
    				</p:dataTable>
    			</div>
    		</h:form>
    		
    		<h:outputText value="#{msgs['GESTIONNAIRE.NOT.FOUND']}"
    			rendered="#{empty gestionnaireController.paginator.visibleItems}" />
    		
    		<br />
    		<br />
    		<br />
    	</div>
    	
    	<script type="text/javascript">
    	highlightChildrenLiTags('navigationHeader:navigation');
    	highlightChildrenLiTags('navigationFooter:navigation');
    	hideElement('seeManagersForm:managerData:submitPageSize');
    </script>
    </ui:define>
</ui:composition>
