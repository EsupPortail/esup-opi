<ui:composition xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    template="/stylesheets/template.xhtml">
    <ui:define name="content">
    	
    	
    	<div id="maPage" class="div_body">
    		<ui:fragment rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.addAction}">
    			<h1><h:outputText value="#{msgs['GESTIONNAIRE.TITLE.ADD']}"/></h1>
    		</ui:fragment>
    		<ui:fragment rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.updateAction}">
    			<h1><h:outputText value="#{msgs['GESTIONNAIRE.TITLE.UPDATE']}"/></h1>
    		</ui:fragment>
    		<div class="messageForUser">
    			<p:messages id="messages" showDetail="true" autoUpdate="true" />
    		</div>
    		<div class="maxDivTextRight">
    			<h:panelGroup>
    				<h:outputText value="#{msgs['INFO.CHAMP']}" />
    				<h:outputText value="*" styleClass="etoileForChpObli" />
    			</h:panelGroup>
    		</div>
    		<br />
    		<br />
    		<br />
    
    		<div id="div_subSection" class="div_subSection">
    			<h:form id="enterManagerForm">
    				<div id="blockFormInfo" class="blockForm">
    					<div class="blockButton">
    						<h:panelGrid columns="2" columnClasses="col2UnDemi,col2UnDemi"
    							styleClass="twoGroupsButton">
    							<p:commandButton value="#{msgs['GESTIONNAIRE.SEARCH_LDAP']}"
    								immediate="true" onclick="javascript:{clickAnnuler = true;}"
    								action="#{gestionnaireController.goSearchManager}"
    								rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.addAction}">
    								<f:setPropertyActionListener value="#{ldapSearchController.ldapEnum.managerValue}" target="#{ldapSearchController.ldapEnum.whereAreYouFrom}" />
    							</p:commandButton>
    							<h:panelGroup
    								rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.updateAction}" />
    							<h:panelGroup>
    								<p:commandButton value="#{msgs['_.BUTTON.VALIDATE']}"
    									action="#{gestionnaireController.add}"
    									rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.addAction
    											&& managedAccess.addAuthorized}" />
    								<p:commandButton value="#{msgs['_.BUTTON.VALIDATE']}"
    									action="#{gestionnaireController.update}"
    									rendered="#{gestionnaireController.actionEnum.whatAction == gestionnaireController.actionEnum.updateAction
    											&& managedAccess.updateAuthorized}" />
    								<p:commandButton value="#{msgs['_.BUTTON.CANCEL']}"
    									onclick="javascript:{clickAnnuler = true;}" immediate="true"
    									action="#{gestionnaireController.goSeeAllManagers}" />
    							</h:panelGroup>
    						</h:panelGrid>
    					</div>
    					<h:panelGrid styleClass="tableWidthMax" columns="4"
    						columnClasses="colUnQuart,colUnQuart,colUnQuart,colUnQuart">
    						<h:panelGroup>
    							<h:outputLabel value="#{msgs['FIELD_LABEL.NAME']}" for="nom"
    								styleClass="form-field-label-validator" />
    							<h:outputText value="*" styleClass="etoileForChpObli" />
    						</h:panelGroup>
    						<h:inputText id="nom" size="31" maxlength="30"
    							value="#{gestionnaireController.manager.nomUsuel}" />
    						<h:panelGroup>
    							<h:outputLabel value="#{msgs['INDIVIDU.PRENOM']}" for="prenom"
    								styleClass="form-field-label-validator" />
    							<h:outputText value="*" styleClass="etoileForChpObli" />
    						</h:panelGroup>
    						<h:inputText id="prenom" size="22" maxlength="20"
    							value="#{gestionnaireController.manager.prenom}" />
    
    						<h:panelGroup>
    							<h:outputLabel value="#{msgs['GESTIONNAIRE.LOGIN']}" for="login"
    								styleClass="form-field-label-validator" />
    							<h:outputText value="*" styleClass="etoileForChpObli" />
    						</h:panelGroup>
    						<h:inputText id="login" size="35" maxlength="50"
    							value="#{gestionnaireController.manager.login}" />
    						<h:panelGroup>
    							<h:outputLabel value="#{msgs['FIELD_LABEL.MAIL']}"
    								styleClass="form-field-label-validator" for="adressMail" />
    							<h:outputText value="*" styleClass="etoileForChpObli" />
    						</h:panelGroup>
    						<h:inputText id="adressMail" size="43" maxlength="50"
    							value="#{gestionnaireController.manager.adressMail}" />
    
    						<h:panelGroup>
    							<h:outputLabel value="#{msgs['PROFIL']}" for="profil"
    								styleClass="form-field-label-validator" />
    							<h:outputText value="*" styleClass="etoileForChpObli" />
    						</h:panelGroup>
    						<p:selectOneMenu id="profil" converter="javax.faces.Integer"
    							value="#{gestionnaireController.idProfilSelected}">
    							<f:selectItem itemLabel=""
    									itemValue="" />
    							<f:selectItems var="beanProfile"
    								value="#{profilController.beanProfileInUse}"
    								itemLabel="#{beanProfile.profile.libelle}"
    								itemValue="#{beanProfile.profile.id}" />
    						</p:selectOneMenu>
    						<h:outputLabel value="#{msgs['FIELD_LABEL.CGE']}" for="cge" />
    						<h:panelGroup>
    							<p:selectOneMenu id="cge"
    								valueChangeListener="#{gestionnaireController.selectCge}"
    								onclick="javascript:{clickAnnuler = true;}"
    								onchange="javascript:{simulateLinkClick('enterManagerForm:submitCodCge');}"
    								value="#{gestionnaireController.manager.codeCge}">
    								<f:selectItem itemLabel="#{msgs['FIELD_LABEL.SELECT']}"
    									itemValue="" />
    								<f:selectItems var="centreGestion"
    									value="#{gestionnaireController.centreGestion}"
    									itemLabel="#{centreGestion.libCge}"
    									itemValue="#{centreGestion.codCge}" />
    							</p:selectOneMenu>
    							<p:commandButton id="submitCodCge"
    								onclick="javascript:{clickAnnuler = true;}" />
    						</h:panelGroup>
    
    						<h:panelGroup>
    							<h:outputLabel value="#{msgs['GESTIONNAIRE.DBT_VALID']}"
    								styleClass="form-field-label-validator" for="datdbtvalid" />
    							<h:outputText value="*" styleClass="etoileForChpObli" />
    						</h:panelGroup>
    						<h:inputText id="datdbtvalid" size="10" maxlength="8"
    							value="#{gestionnaireController.manager.dateDbtValidite}">
    							<f:convertDateTime pattern="ddMMyyyy" timeZone="#{sessionController.timezone}" />
    							<f:validateLength minimum="8"/>
    						</h:inputText>
    						<h:outputLabel value="#{msgs['GESTIONNAIRE.END_VALID']}"
    							for="datfinvalid" />
    						<h:inputText id="datfinvalid" size="10" maxlength="8"
    							value="#{gestionnaireController.manager.dateFinValidite}">
    							<f:convertDateTime pattern="ddMMyyyy" timeZone="#{sessionController.timezone}" />
    							<f:validateLength minimum="8"/>
    						</h:inputText>
    					</h:panelGrid>
    				</div>
                    
    				<br />
    				<br />
    				<br />
                    <ui:fragment rendered="#{gestionnaireController.manager.codeCge == ''
                                || gestionnaireController.manager.codeCge == null}">
        				<div id="divSelectCmi">
        					<ui:include src="../referentiels/_commission/_selectCmi.xhtml" />
        				</div>
                    </ui:fragment>
    			</h:form>
    		</div>    
    		<br />
    		<br />
    		<br />
    	</div>
    	
    	<script type="text/javascript">
        	highlightChildrenLiTags('navigationHeader:navigation');
        	highlightChildrenLiTags('navigationFooter:navigation');
        	highlightInputAndSelect('enterManagerForm');
        	hideElement('enterManagerForm:submitCodCge');
        	hideElement('submitCmi');
        </script>
    </ui:define>
</ui:composition>
